{% extends "_meta/_root.html" %}
{% from "changelog/macros.html" import gen_pokemon_changes %}

{#
the changelog format is optimised for display in pokemon views, NOT here.
this means we need to do some gross iteration hacks.
#}

{% block content %}
<section class="section">
    <div class="container">
        <h1 class="title has-text-centered">Changelog</h1>
        <hr/>
        <div class="content">
            {% for version in changelog.versions %}
            <h2 class="subtitle has-text-centered">
                <a href="#version-{{ version }}" id="version-{{ version }}">
                    {{ version }} <i class="bi bi-link-45deg"></i>
                </a>
            </h2>
            <hr/>
            <h3>Pok√©mon changes</h3>
            <ul>
                {% for id, changes in changelog.pokemon.items() %}
                {% set species = catalog.species_mapping[id] %}
                {{ gen_pokemon_changes(changes, species, version) }}
                {% endfor %}
            </ul>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}